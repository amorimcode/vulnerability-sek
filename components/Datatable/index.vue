<template>
  <el-table
    :data="tableData"
    class="border-2 rounded w-100 min-h-[300px]"
    :row-class-name="levelClassname"
  >
    <el-table-column width="70">
      <template #default="scope">
        <div
          :class="[
            'transform rotate-[270deg] text-background',
            getSeverityClass(scope.row.criticallyLevel),
          ]"
        >
          <span>{{ getSeverity(scope.row.criticallyLevel) }}</span>
        </div>
      </template>
    </el-table-column>
    <el-table-column
      prop="vulnerability"
      label="Vulnerabilidade"
      min-width="300px"
    />
    <el-table-column prop="status" label="Status" />
  </el-table>
</template>

<script lang="ts" setup>
import { CRITICALLY_LEVEL } from "@/enums";

const tableData = [
  { criticallyLevel: 1, vulnerability: "2016-05-03", status: "Tom" },
];

const getSeverity = (criticallyLevel: CRITICALLY_LEVEL) => {
  if (criticallyLevel === CRITICALLY_LEVEL.HIGH) {
    return "Alto";
  }
  if (criticallyLevel === CRITICALLY_LEVEL.MEDIUM) {
    return "MÃ©dio";
  }
  if (criticallyLevel === CRITICALLY_LEVEL.LOW) {
    return "Baixo";
  }
  return "";
};

const getSeverityClass = (criticallyLevel: CRITICALLY_LEVEL) => {
  if (criticallyLevel === CRITICALLY_LEVEL.HIGH) {
    return "bg-solid-red";
  }
  if (criticallyLevel === CRITICALLY_LEVEL.MEDIUM) {
    return "bg-solid-orange";
  }
  if (criticallyLevel === CRITICALLY_LEVEL.LOW) {
    return "bg-solid-yellow";
  }
  return "";
};

const levelClassname = (scope: any) => {
  return getSeverityClass(scope.row.criticallyLevel);
};
</script>
